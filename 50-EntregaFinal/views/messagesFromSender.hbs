<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Home</title>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.7.7/handlebars.min.js"></script>
        <script type="text/javascript" src="https://code.jquery.com/jquery-1.7.1.min.js"></script>
        <script src="/socket.io/socket.io.js"></script>
        <script type="text/javascript" src="../../chat.js" defer></script>
        <style>
            table, th, td {
            border:1px solid black;
            }
        </style>
    </head>
    <body>
        <section>
        <div>
            <button type="button" onclick=window.location='/'>Home</button>
            <button type="button" onclick=window.location='/accounts/logout'>Log out</button>
            <button type="button" onclick=window.location='/accounts/profile'>Profile</button>            
            <button type="button" onclick=window.location='/carritos/micarrito'>Cart</button>
            <button type="button" onclick=window.location='/compras'>Buy History</button>
            <button type="button" onclick=window.location='/chat'>Chat</button>
            {{#if data.userIsAdmin}}
            <button type="button" onclick=window.location='/categorias'>Categories</button>
            <button type="button" onclick=window.location='/info'>Server info</button>
            {{/if}}
            
        </div>
        <h1> Welcome, {{data.name}}</h1>
        </section>

        <button type="button" onclick=window.location='/chat'>Back to chat</button>
        <hr>
        {{#if data.allMessagesFromSender.[0]}}
        <h2>Rendering all messages from {{data.reqSender}}</h2>
        <table>
            <tr>
                <th>Sender</th>
                <th>Message</th>
                <th>Actions</th>
            </tr>
            {{#each data.allMessagesFromSender}}
            <tr>
                <td><a href='/chat/{{this.sender}}'>{{this.sender}}</a></td> 
                {{!-- aca tengo que poner un link al filtro por remitente --}}
                <td>{{this.value}}</td>
                <td>Not implemented!</td>
            </tr>
            {{/each}}
        </table>
        {{else}}
        <h2>{{data.reqSender}} hasn't sent any messages yet!</h2>
        {{/if}}
